Preparation
-----------
Ensure no jobs are running which have been started from the portal (user == cvop)

Building
--------
mvn clean install
(cd calvalus-processing; mvn -Dmaven.test.skip=true assembly:assembly)
(cd calvalus-production; mvn -Dmaven.test.skip=true assembly:assembly)

===========================================================================
Calvalus
--------
java -jar calvalus-production/target/calvalus-production-1.7-SNAPSHOT-tool.jar -e --uninstall calvalus-1.7-SNAPSHOT
java -jar calvalus-production/target/calvalus-production-1.7-SNAPSHOT-tool.jar -e --deploy  calvalus-processing/target/calvalus-processing-1.7-SNAPSHOT-calvalus/*.jar calvalus-1.7-SNAPSHOT

for lc-cci
----------
java -jar calvalus-production/target/calvalus-production-1.7-SNAPSHOT-tool.jar -e --uninstall  calvalus-1.7-SNAPSHOT-lc
java -jar calvalus-production/target/calvalus-production-1.7-SNAPSHOT-tool.jar -e --deploy  calvalus-processing/target/calvalus-processing-1.7-SNAPSHOT-calvalus/*.jar calvalus-1.7-SNAPSHOT-lc

BEAM
-----
java -jar calvalus-production/target/calvalus-production-1.7-SNAPSHOT-tool.jar -e --uninstall beam-4.11.1-SNAPSHOT
java -jar calvalus-production/target/calvalus-production-1.7-SNAPSHOT-tool.jar -e --deploy  calvalus-processing/target/calvalus-processing-1.7-SNAPSHOT-beam/*.jar beam-4.11.1-SNAPSHOT


===========================================================================
Portal Software
-------------------
java -jar calvalus-production/target/calvalus-production-1.7-SNAPSHOT-tool.jar -e --uninstall calvalus-1.7-portal-20130823
java -jar calvalus-production/target/calvalus-production-1.7-SNAPSHOT-tool.jar -e --deploy  calvalus-processing/target/calvalus-processing-1.7-SNAPSHOT-calvalus/*.jar calvalus-1.7-portal-20130823
java -jar calvalus-production/target/calvalus-production-1.7-SNAPSHOT-tool.jar -e --uninstall beam-4.10.4-portal-20130617
java -jar calvalus-production/target/calvalus-production-1.7-SNAPSHOT-tool.jar -e --deploy  calvalus-processing/target/calvalus-processing-1.7-SNAPSHOT-beam/*.jar beam-4.10.4-portal-20130617

WAR (for the portal)
--------------------
(cd calvalus-portal/target; scp calvalus-portal-1.7-SNAPSHOT.war cvop@bcvm03: )
ssh cvop@bcvm03
cd /opt/apache-tomcat-7.0.11/bin/
./shutdown.sh

# save staging
cd ../webapps/calvalus/
mv staging/ ../../temp/

# redeploy
cd ..
rm -rf calvalus calvalus.war
rm -rf ../work/Catalina/localhost/calvalus/
mv /home/cvop/calvalus-portal-1.7-SNAPSHOT.war calvalus.war

# restart
cd ../bin/
./startup.sh
tail -5f ../logs/catalina.out

# restore staging
cd ../webapps/calvalus/
rm -rf staging/
mv ../../temp/staging .


Sample executable
-----------------
java -jar calvalus-production/target/calvalus-production-1.7-SNAPSHOT-tool.jar -e --uninstall  examples-beam-1.0
java -jar calvalus-production/target/calvalus-production-1.7-SNAPSHOT-tool.jar -e --uninstall  examples-shell-1.0
java -jar calvalus-production/target/calvalus-production-1.7-SNAPSHOT-tool.jar -e --deploy  calvalus-shell-executables/examples-beam-1.0/* examples-beam-1.0
java -jar calvalus-production/target/calvalus-production-1.7-SNAPSHOT-tool.jar -e --deploy  calvalus-shell-executables/examples-shell-1.0/* examples-shell-1.0

java -jar calvalus-production/target/calvalus-production-1.7-SNAPSHOT-tool.jar -e calvalus-shell-executables/examples-shell-requests-1.0/simple.xml

